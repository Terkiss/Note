# 20211007
서버에 모든 캐릭터 정보를 올려 둔다.
딕셔너리는 접근 시간이 상수 시간 이므로 이런거에 적합 할듯 하다. 
ServerMemData에 기록
Dictionary<sessionKey, gameID>
Dictionary<gameID, myOwnCharacter> 형식
Dictionary<stage, EnemyCharacter>

서버는 처음 기동시에 모든 유저의 정보를 로딩
// 서버에서 받은 데이터는 즉각 즉각 옵저버로 전송 
로딩한 정보는 새로운 스레드로 5분 간격으로 디비 저장 

해당 매치의 마스터 클라이언트가
명령을 생성해서 서버로 전송
서버는 명령을 해당 그룹내 브로드 캐스팅 절대로 p2p 통신 할 필요가 없음
브로드 통신할떄 -> 전송되는것 특정 캐릭터의 공격 정보 스킬, 데미지, 이펙트, 현재 피통, 맥스 피통
(이런 형식을 처리하기 위해 서버에서 해야할일 서버에 해당 매치에 해당하는 캐릭터 정보를 들고 있어야함)

p->  서버에서 온 데이터 대로 클라이언트는 처리후 마스터 클라이언트에게 isdone 메시지를 p2p 통신으로 보냄

마스터 클라이언트는 p2p 로 받은 isdone 메시지를 확인후 명령을 하나 인출해서 서버에게 전송



서버 에서 다 처리 해볼까 






# 서버 사이드 처리
서버에서는 이 캐릭터가 enemy 인지 플레이어 인지 판단이 불가 함
따라서 데이터는 1번 캐릭터셋, 2번 캐릭터셋 등으로 들고 있어야함 -> 다행이 enemy 캐릭터와 player 캐릭터의 정보는 크게 다르지 않음 하나의 통일된 클래스로 관리가 가능함!
ex)
    List<Character> CharacterFirst, List<Character> CharacterSeconds

마스터 클라이언트가 보낸 명령을 서버가 받았을경우
서버는 받은 명령 정보를 토대로 (여기서 클라가 보낸 명령 정보에는 mine, target, skillType, effect)
캐릭터 셋 에서 검색을함 
받은 정보를 토대로 데미지 처리를 하고
해당 명령 정보에 추가 정보를 기록 하여 해당 그룹에 브로드 캐스팅 합니다. (mine, target, skillType, effect, currenthealthy, maxHealthy)
만약 이과정 중에  한쪽 캐릭터셋 이 다 죽엇을경우 다른쪽 캐릭터셋을 승리 판정 합니다. ->클라이언트에게 승리 정보를 브로드 캐스트 합니다.
  승리 판정 -> 은 해당 캐릭터셋 을 조사후에 에네미 캐릭터로 판정 됬을경우 패배처리
             플레이어 캐릭터로 판정 됬을경우 적절한 아이템 보상  -< 지금은 아직 보상 관련 루틴이 없음 일단 완성을 하고 추후에 추가하는걸로 >
